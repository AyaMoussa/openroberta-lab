include: "classpath:/common.methods.yml"
# method names are based on FunctionNames and EdisonUsedHardwareCollectorVisitor.Method
# languages are based on HelperMethodGenerator.Language

## FunctionNames

KEY_PRESSED:
  PYTHON: |
    def _key_pressed():
        global board
        event = board.button.wait_for_press(0.050)
        if (event == True):
            return True
        else:
            return False

CONTAINS:
  PYTHON: |
    def _contains(phrase, test_array):
        for test in test_array:
            if ((" " + phrase + " ").find(" " + test + " ") >= 0):
                return True
        return False

SIGNAL:
  PYTHON: |
    def _signal_handler(signum, frame):
        global board
        board.close()
        sys.exit()

SAY:
  PYTHON: |
    def _say(text, lang):
        global __volume
        data = "<volume level='60'><pitch level='110'><speed level='100'>%s</speed></pitch></volume>" % \
            (text)
        with tempfile.NamedTemporaryFile(suffix='.wav') as f:
            cmd = 'amixer sset "Master" {}% && pico2wave --wave {} --lang {} "{}" && aplay -q -D default {}'.format \
                (__volume, f.name, lang, data, f.name)
            sP.check_call(cmd, shell=True)
